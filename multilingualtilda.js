/*!
 * multilingualtilda.js v1.0
 * MIT License | (c) 2025 Vladislav Land
 * https://github.com/VladislavLand/tildatranslate/raw/main/LICENSE
 * https://vladislav-land.ru/multilingual
 */
window.addEventListener('load',function(){const vladislavlandElement=document.querySelector('.vladislavland');if(!vladislavlandElement)return;vladislavlandElement.style.position='relative';const langBtn=document.getElementById('langBtn');const translateElement=document.getElementById('google_translate_element');if(langBtn&&translateElement){vladislavlandElement.appendChild(langBtn);vladislavlandElement.appendChild(translateElement);}document.getElementById("langBtn").addEventListener("click",function(e){e.stopPropagation();toggleTranslateWidget();});document.addEventListener("click",function(e){const widget=document.getElementById("google_translate_element");const button=document.getElementById("langBtn");const vladislavland=document.querySelector('.vladislavland');if(widget.style.display==="block"&&!widget.contains(e.target)&&!button.contains(e.target)&&!vladislavland.contains(e.target)){widget.style.display="none";}});updateLangButton('ru');watchWidgetLanguageChange();preventScrollOnOpen();setTimeout(hideUnnecessaryElements,1000);});function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"ru",includedLanguages:"ru,en,fr,zh-CN,kk",layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:false},"google_translate_element");}const flags={ru:"https://static.tildacdn.com/tild3930-3039-4463-b536-666463383031/photo.png",en:"https://static.tildacdn.com/tild3338-6364-4837-b438-633839633932/en.png",fr:"https://static.tildacdn.com/tild3564-3930-4238-b366-366666633031/fr.png","zh-CN":"https://static.tildacdn.com/tild6361-6130-4238-b137-393932333332/cn.png",kk:"https://static.tildacdn.com/tild3132-3233-4735-b135-346534663735/kz.png"};function updateLangButton(lang){const btn=document.getElementById("langBtn");const span=btn.querySelector("span");const img=btn.querySelector("img");let code=lang.toUpperCase();if(lang==="zh-CN")code="CN";span.textContent=code;img.src=flags[lang]||flags.ru;img.alt=lang.toUpperCase();}function autoCloseWidget(){const widget=document.getElementById("google_translate_element");if(widget.style.display==="block"){widget.style.display="none";}}function watchWidgetLanguageChange(){const widget=document.getElementById("google_translate_element");if(!widget)return;new MutationObserver(()=>{autoCloseWidget();}).observe(widget,{childList:true,subtree:true});}function preventScrollOnOpen(){const widget=document.getElementById("google_translate_element");if(widget){widget.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();const scrollX=window.scrollX;const scrollY=window.scrollY;setTimeout(()=>{window.scrollTo(scrollX,scrollY);},1);});}}function toggleTranslateWidget(){const widget=document.getElementById("google_translate_element");widget.style.display=(widget.style.display==="none"||widget.style.display==="")?"block":"none";setTimeout(()=>{const translateButton=document.querySelector('.goog-te-gadget-simple');if(translateButton){translateButton.click();}},100);}function hideUnnecessaryElements(){const menuValue=document.querySelector('.goog-te-gadget-simple .goog-te-menu-value');if(menuValue){menuValue.style.display='none';}}

